<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archivo de Educaci贸n | Acervo Digital</title>
    <style>
        /* ESTILO INSTITUCIONAL C */
        body { margin: 0; background: #fafafa; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #333; }
        header { background: #002147; color: #ffffff; padding: 40px 20px; text-align: center; border-bottom: 5px solid #b8860b; }
        header h1 { margin: 0; font-size: 2.5em; letter-spacing: 1px; }
        header p { margin: 10px 0 0; opacity: 0.9; font-style: italic; }
        
        .container { max-width: 900px; margin: auto; padding: 20px; }
        
        /* Secci贸n de descripci贸n */
        .descripcion-sitio { background: white; padding: 20px; border: 1px solid #e1e1e1; margin-bottom: 30px; line-height: 1.6; border-radius: 4px; }
        .descripcion-sitio h2 { color: #002147; margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .link-archivo { display: inline-block; margin-top: 10px; color: #b8860b; font-weight: bold; text-decoration: none; border: 1px solid #b8860b; padding: 5px 15px; border-radius: 4px; transition: 0.3s; }
        .link-archivo:hover { background: #b8860b; color: white; }

        /* Buscador */
        .search-box { position: sticky; top: 10px; z-index: 100; margin-bottom: 40px; }
        input { width: 100%; padding: 20px; border: 2px solid #002147; border-radius: 5px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); font-size: 1.1em; box-sizing: border-box; }

        /* Resultados */
        .item { background: white; margin: 25px 0; padding: 30px; border: 1px solid #e1e1e1; border-top: 5px solid #b8860b; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .item h3 { margin: 0 0 10px 0; color: #002147; font-size: 1.5em; }
        .meta { font-size: 0.9em; color: #666; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
        .meta span { color: #b8860b; font-weight: bold; }
        .text { line-height: 1.8; text-align: justify; color: #444; }
        mark { background: #fff59d; color: #000; font-weight: bold; padding: 0 2px; }
        
        footer { text-align: center; padding: 40px; color: #888; font-size: 0.8em; }
    </style>
</head>
<body>

<header>
    <h1>Archivo de Educaci贸n</h1>
    <p>Revista Mexicana de Educaci贸n y Desarrollo: Paedagogium</p>
</header>

<div class="container">
    <section class="descripcion-sitio">
        <h2>Sobre el Acervo</h2>
        <p>Bienvenido al buscador digital del <strong>Archivo de Educaci贸n</strong>. Este espacio resguarda la memoria intelectual de la revista <em>Paedagogium</em>, facilitando la consulta de art铆culos, ensayos y rese帽as que han moldeado el pensamiento pedag贸gico en M茅xico.</p>
        <a href="https://fyce.org.mx/paedagogium/" target="_blank" class="link-archivo"> Consultar Revistas Originales (PDF)</a>
    </section>

    <div class="search-box">
        <input type="text" id="buscador" placeholder="Buscar por tema, autor o palabra clave...">
    </div>

    <div id="resultados"></div>
</div>

<footer>
    &copy; 2024 Archivo de Educaci贸n. Digitalizaci贸n y Preservaci贸n Documental.
</footer>

<script>
    let acervo = [];

    // Cargar el JSON
    fetch('volumen_12_completo.json')
        .then(res => res.json())
        .then(data => {
            acervo = data.secciones;
            console.log("Acervo cargado exitosamente");
        })
        .catch(err => console.error("Error cargando base de datos", err));

    const input = document.getElementById('buscador');
    const resDiv = document.getElementById('resultados');

    input.addEventListener('keyup', () => {
        const term = input.value.toLowerCase();
        resDiv.innerHTML = '';
        if (term.length < 3) return;

        const filtered = acervo.filter(s => 
            (s.titulo || "").toLowerCase().includes(term) || 
            (s.cuerpo_texto || "").toLowerCase().includes(term) ||
            (s.autor || "").toLowerCase().includes(term)
        );

        filtered.forEach(s => {
            const div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = `
                <div class="meta">Secci贸n: <span>${s.tipo}</span> | P谩gina: <span>${s.paginas || s.pagina}</span></div>
                <h3>${s.titulo || s.tipo}</h3>
                <div class="meta">Autor: <span>${s.autor || 'Redacci贸n'}</span></div>
                <div class="text">${resaltar(s.cuerpo_texto || "", term)}</div>
            `;
            resDiv.appendChild(div);
        });
    });

    function resaltar(texto, query) {
        if (!texto) return "Contenido informativo.";
        const index = texto.toLowerCase().indexOf(query);
        const inicio = Math.max(0, index - 80);
        const fin = Math.min(texto.length, index + 250);
        const regex = new RegExp(query, "gi");
        let fragmento = texto.substring(inicio, fin);
        return (inicio > 0 ? "..." : "") + fragmento.replace(regex, m => `<mark>${m}</mark>`) + "...";
    }
</script>

</body>
</html>
